{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags%}

{% block metadescription %}
All Events
{% endblock %}
{% block title %}
Events | StreamStage
{% endblock title %}

{% block content %}
<div>
    <h1 class="text-center my-2">All Events</h1>

    <!-- Listing All Events -->
    {% for event in events %}
    <div class="row my-4">
        <div class="col-9">
            <a href="{% url 'event_view' event.event_id %}">
                <div class="row">

                    <div class="col-1">
                        <p>{{ event.categories }}</p>
                    </div>
                    <div class="col-3">
                        <h4>{{ event.streamer }}</h4>
                        {% if event.media.all.count == 0 %}
                        <img class="event-cover col-3" src="{% static 'images/default_event_cover.png' %}"
                            alt="No Event Cover Photo">
                        {% else %}
                        <img class="event-cover col-3" src="{{ cover_pic.picture.url }}">
                        {% endif %}
                    </div>
                    <div class="col-8">
                        <h4>{{ event.title }}</h4>
                        <p>{{ event.short_description }}</p>
                        <p>{{ event.showings }}</p>

                    </div>
                </div>
            </a>
        </div>
        <!-- Reviews For Each event -->
        <div class="col-3 text-center">
            <h6>Reviews</h6>
            <p>
                {% include 'reviews/review.html' with review=event.get_top_review %}
            </p>
        </div>
    </div>
    {% endfor %}
    <hr />
</div>
{% endblock %}